<!DOCTYPE html>
<html lang="ku" dir="ltr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>LKURD • Dijital Kurdistan</title>
  
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.168.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.168.0/examples/js/controls/OrbitControls.min.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body, html {
      height: 100%;
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: #0a1f12;
      color: #e0e0e0;
      overflow: hidden;
      touch-action: manipulation;
    }

    /* Telegram tema entegrasyonu */
    :root {
      --tg-bg: var(--tg-theme-bg-color, #0a1f12);
      --tg-text: var(--tg-theme-text-color, #e0e0e0);
      --tg-accent: var(--tg-theme-button-color, #2e8b57);
      --gold: #d4af37;
      --green: #2e8b57;
      --dark: #04100a;
    }

    #app {
      height: 100vh;
      width: 100vw;
      display: flex;
      flex-direction: column;
      background: linear-gradient(to bottom, var(--dark), var(--tg-bg));
    }

    header {
      padding: 12px 16px;
      background: rgba(10, 31, 18, 0.85);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(212, 175, 55, 0.18);
      display: flex;
      align-items: center;
      justify-content: space-between;
      z-index: 10;
    }

    .logo {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--gold);
      letter-spacing: 1px;
    }

    .logo span {
      color: var(--green);
    }

    nav {
      display: flex;
      gap: 10px;
    }

    .nav-btn {
      background: rgba(46, 139, 87, 0.25);
      border: 1px solid var(--green);
      color: white;
      padding: 8px 14px;
      border-radius: 8px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .nav-btn:hover,
    .nav-btn.active {
      background: var(--green);
      box-shadow: 0 0 12px rgba(46, 139, 87, 0.6);
    }

    #three-container {
      flex: 1;
      position: relative;
      overflow: hidden;
    }

    #three-canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
    }

    .overlay {
      position: absolute;
      inset: 0;
      pointer-events: none;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 16px;
    }

    .top-info {
      background: rgba(0,0,0,0.4);
      backdrop-filter: blur(8px);
      padding: 10px 14px;
      border-radius: 12px;
      width: fit-content;
      align-self: center;
      border: 1px solid rgba(212, 175, 55, 0.3);
    }

    .bottom-bar {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      pointer-events: auto;
    }

    .action-btn {
      background: linear-gradient(145deg, #1a3c2a, #0f251a);
      border: 2px solid var(--gold);
      color: var(--gold);
      padding: 14px 24px;
      border-radius: 12px;
      font-size: 1.05rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s;
      box-shadow: 0 4px 15px rgba(212, 175, 55, 0.15);
    }

    .action-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(212, 175, 55, 0.35);
      background: linear-gradient(145deg, #2e8b57, #1f5c3b);
      color: white;
    }

    .action-btn.gold {
      border-color: var(--gold);
      color: var(--gold);
    }

    @media (max-width: 500px) {
      .action-btn { padding: 12px 20px; font-size: 0.95rem; }
    }
  </style>
</head>
<body>

<div id="app">
  <header>
    <div class="logo">LKURD <span>Dijital Kurdistan</span></div>
    <nav>
      <button class="nav-btn active">Bakanlıklar</button>
      <button class="nav-btn">Topraklar</button>
      <button class="nav-btn">Pazar</button>
    </nav>
  </header>

  <div id="three-container">
    <canvas id="three-canvas"></canvas>

    <div class="overlay">
      <div class="top-info">
        Bakiyen: 1.240.000 ₭ | Seviye: 7 • Welatparêz
      </div>

      <div class="bottom-bar">
        <button class="action-btn">Bakanlığa Yatırım Yap</button>
        <button class="action-btn gold">Yeni Bölge İnşa Et</button>
        <button class="action-btn">Kültürel Etkinlik</button>
      </div>
    </div>
  </div>
</div>

<script>
// Telegram Mini App başlatma
if (window.Telegram?.WebApp) {
  const tg = window.Telegram.WebApp;
  tg.ready();
  tg.expand();
  if (tg.requestFullscreen) tg.requestFullscreen();
  tg.MainButton.setText("LKURD Menü").show();
  tg.MainButton.onClick(() => alert("Ana menüye hoş geldin!"));
}

// Basit Three.js sahne (daha sonra geliştirilecek)
const canvas = document.getElementById('three-canvas');
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x04100a);

const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 2000);
camera.position.set(0, 15, 40);

const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.dampingFactor = 0.05;
controls.minDistance = 10;
controls.maxDistance = 120;
controls.maxPolarAngle = Math.PI * 0.48;

// Zemin (yeşil yayla)
const groundGeo = new THREE.PlaneGeometry(300, 300, 80, 80);
const groundMat = new THREE.MeshStandardMaterial({ 
  color: 0x2e8b57, 
  roughness: 0.9, 
  metalness: 0.05 
});
const ground = new THREE.Mesh(groundGeo, groundMat);
ground.rotation.x = -Math.PI / 2;
ground.position.y = -0.5;
scene.add(ground);

// Basit dağlar (örnek)
for (let i = 0; i < 5; i++) {
  const height = 12 + Math.random() * 18;
  const mountain = new THREE.Mesh(
    new THREE.ConeGeometry(15 + Math.random()*10, height, 6 + Math.floor(Math.random()*4)),
    new THREE.MeshStandardMaterial({ color: 0x4a2c0d, roughness: 0.85 })
  );
  mountain.position.set(
    (Math.random() - 0.5) * 120,
    height/2 - 1,
    (Math.random() - 0.5) * 100 - 30
  );
  scene.add(mountain);
}

// Işıklar
scene.add(new THREE.AmbientLight(0xffffff, 0.7));
const sun = new THREE.DirectionalLight(0xffe8c0, 1.2);
sun.position.set(30, 60, 40);
scene.add(sun);

// Resize handler
window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

function animate() {
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
}
animate();

</script>
</body>
</html>